# RegEx
> 正则表达式(*Regular Expression, a.k.a RegEx or RegExp*)是一组由字母和符号组成的特殊文本。

- [RegEx](#regex)
	- [1. 基本匹配](#1-%e5%9f%ba%e6%9c%ac%e5%8c%b9%e9%85%8d)
	- [2. 元字符](#2-%e5%85%83%e5%ad%97%e7%ac%a6)
		- [2.1 点运算符`.`](#21-%e7%82%b9%e8%bf%90%e7%ae%97%e7%ac%a6)
		- [2.2 字符集](#22-%e5%ad%97%e7%ac%a6%e9%9b%86)
			- [2.2.1 (肯定)字符集`[ ]`](#221-%e8%82%af%e5%ae%9a%e5%ad%97%e7%ac%a6%e9%9b%86)
			- [2.2.2 否定字符集`[^ ]`](#222-%e5%90%a6%e5%ae%9a%e5%ad%97%e7%ac%a6%e9%9b%86)
		- [2.3 重复次数](#23-%e9%87%8d%e5%a4%8d%e6%ac%a1%e6%95%b0)
			- [2.3.1 `*`号](#231-%e5%8f%b7)
			- [2.3.2 `+`号](#232-%e5%8f%b7)
			- [2.3.3 `?`号](#233-%e5%8f%b7)
			- [2.3.4 `{}`号](#234-%e5%8f%b7)
		- [2.4 特征标群](#24-%e7%89%b9%e5%be%81%e6%a0%87%e7%be%a4)
			- [2.4.1 捕获特征群`(...)`](#241-%e6%8d%95%e8%8e%b7%e7%89%b9%e5%be%81%e7%be%a4)
			- [2.4.2 非捕获特征群`(?:...)`](#242-%e9%9d%9e%e6%8d%95%e8%8e%b7%e7%89%b9%e5%be%81%e7%be%a4)
		- [2.5 或运算符`|`](#25-%e6%88%96%e8%bf%90%e7%ae%97%e7%ac%a6)
		- [2.6 转码特殊字符](#26-%e8%bd%ac%e7%a0%81%e7%89%b9%e6%ae%8a%e5%ad%97%e7%ac%a6)
		- [2.7 锚点](#27-%e9%94%9a%e7%82%b9)
		- [2.7.1 开头指定`^`](#271-%e5%bc%80%e5%a4%b4%e6%8c%87%e5%ae%9a)
		- [2.7.2 结尾指定`$`](#272-%e7%bb%93%e5%b0%be%e6%8c%87%e5%ae%9a)
	- [3. 简写字符集](#3-%e7%ae%80%e5%86%99%e5%ad%97%e7%ac%a6%e9%9b%86)
	- [4. 零宽度断言](#4-%e9%9b%b6%e5%ae%bd%e5%ba%a6%e6%96%ad%e8%a8%80)
		- [4.1 正先行断言`?=...`](#41-%e6%ad%a3%e5%85%88%e8%a1%8c%e6%96%ad%e8%a8%80)
		- [4.2 负先行断言`?!...`](#42-%e8%b4%9f%e5%85%88%e8%a1%8c%e6%96%ad%e8%a8%80)
		- [4.3 正后发断言`?<=...`](#43-%e6%ad%a3%e5%90%8e%e5%8f%91%e6%96%ad%e8%a8%80)
		- [4.4 负后发断言`?<!...`](#44-%e8%b4%9f%e5%90%8e%e5%8f%91%e6%96%ad%e8%a8%80)
	- [5. 标志](#5-%e6%a0%87%e5%bf%97)
		- [5.1 忽略大小写`i`](#51-%e5%bf%bd%e7%95%a5%e5%a4%a7%e5%b0%8f%e5%86%99i)
		- [5.2 全局搜索`g`](#52-%e5%85%a8%e5%b1%80%e6%90%9c%e7%b4%a2g)
		- [5.3 多行修饰符`m`](#53-%e5%a4%9a%e8%a1%8c%e4%bf%ae%e9%a5%b0%e7%ac%a6m)
	- [6. 贪婪匹配与惰性匹配](#6-%e8%b4%aa%e5%a9%aa%e5%8c%b9%e9%85%8d%e4%b8%8e%e6%83%b0%e6%80%a7%e5%8c%b9%e9%85%8d)

## 1. 基本匹配
1. 正则表达式是一种从左到右匹配主体字符串的模式。
2. 正则表达式由一些字母和数字组合而成。
3. 正则表达式是(默认)大小写敏感的。
<pre>
"the" => The fat cat sat on <b>the</b> mat.
[因为大小写敏感，所以不会匹配到第一个'The']
</pre>
## 2. 元字符
1. 正则表达式主要依赖于元字符。
2. 元字符不代表他们本身的字面意思，他们都有特殊的含义。

|元字符|描述|
|:----:|:----:|
|`.`|句号匹配任意单个字符除了换行符。|
|`[ ]`|字符种类。匹配方括号内的任意字符。|
|`[^ ]`|否定的字符种类。匹配除了方括号里的任意字符|
|`*`|匹配>=0个重复的在`*`号之前的字符。|
|`+`|匹配>=1个重复的`+`号前的字符。|
|`?`|匹配0~1个`?`号前的字符.|
|`{n,m}`|匹配n~m个`{}`之前的字符.|
|`(xyz)`|字符集，匹配与`xyz`完全相等的字符串.|
|`\|`|或运算符，匹配符号前或后的字符.|
|`\`|转义字符,用于匹配一些保留的字符 `[ ] ( ) { } . * + ? ^ $ \ `|
|`^`|从开始行开始匹配.|
|`$`|从末端开始匹配.|
### 2.1 点运算符`.`
1. `.`匹配**任意单个**字符，但**不匹配换行符**。
<pre>
".at" => The <b>fat</b> <b>cat</b> <b>sat</b> on the <b>mat</b>.
[理解]此时可匹配项有：任意单字符+"at"
</pre>
### 2.2 字符集
#### 2.2.1 (肯定)字符集`[ ]`
1. **方括号**用来指定一个字符集。
2. 在方括号中使用**连字符**来指定字符集的范围。 
3. 在方括号中的字符集**不关心顺序**。
4. 方括号的**句号就表示句号**(没有特殊意义也不用转义)。
<pre>
"[fm]at[.]" => The fat cat. sat on the <b>mat.</b>
[理解]此时可匹配项有："fat"+任意单字符, "mat"+任意单字符
</pre>
#### 2.2.2 否定字符集`[^ ]`
1. 否定字符集匹配**除了字符集里面**的任意字符。
<pre>
"[^fm]at[^.]" => The fat cat. <b>sat </b>on the mat.
[理解]此时可匹配项有："at"前面不是"f"或"m"，后面不是"."的字符串
[注意]此时匹配内容为："sat "
</pre>
### 2.3 重复次数
#### 2.3.1 `*`号
1. 在`*`号前的字符出现**大于等于0**次。
<pre>
"a*t" => The f<b>at</b> c<b>at</b> s<b>at</b> on <b>t</b>he m<b>at</b>.
[理解]此时可匹配项有："t", "at", "aat", "aaa...at"
</pre>
2. `*`字符和`.`字符搭配可以匹配所有的字符：`.*`
<pre>
".*" => <b>The fat cat sat on the mat.</b>
[理解]此时可匹配项有：任意长字符串
</pre>
<pre>
"a.*t\s" => The f<b>at cat sat </b>on the mat.
[理解]此时可匹配项有："a"+任意长字符串+"t"+空格符号
[注意]此时匹配内容为："at cat sat "
</pre>
<pre>
"a.*?t\s" => The f<b>at </b>cat sat on the mat.
[理解]此时可匹配项有："a"+任意长字符串+"t"+空格符号(<b>惰性匹配</b>)
[注意]此时匹配内容为："at "
</pre>
#### 2.3.2 `+`号
1. 在`+`号前的字符出现**大于等于1**次。
<pre>
"a.+?t" => The f<b>at cat</b> s<b>at on the mat</b>.
[理解]此时可匹配项有："a"+长度大于1的字符串+"t"(<b>惰性匹配</b>)
</pre>
<pre>
"\s*[fm][^0-9]t" => The<b> fat</b> cat sat on the<b> mat</b>.
[理解]此时可匹配项有：任意个空格符号+"f或m"+不为数字的字符+"t"
[注意]此时匹配内容为：" fat"与" mat"
</pre>
#### 2.3.3 `?`号
1. 在`?`号前的字符出现**0或1**次。
<pre>
"[T]?he" => <b>The</b> fat cat sat on t<b>he</b> mat.
[理解]此时可匹配项有："The"与"he"
</pre>
<pre>
"[cm]?at\s?\." => The fat cat sat on the <b>mat.</b>
[理解]此时可匹配项有："cat.", "cat .","mat.","mat .","at.","at ."
</pre>
#### 2.3.4 `{}`号
1. 在`{m,n}`号前的字符，至少出现`m`次，至多出现`n`次
2. `n`可以省略。省略时，**最多出现无数次**
3. `,`可以省略。省略时，**固定出现次数**
4. `*`相当于`{0,}`，`+`相当于`{1,}`，`?`相当于`{0,1}`
<pre>
"[0-9]{2,3}" =>The number was 9.<b>999</b>7 but we rounded it off to <b>10</b>.0.
[理解]此时可匹配项有：2~3个数字组成的字符串。
</pre>
<pre>
"[0-9]{2,3}?" =>The number was 9.<b>99</b><b>97</b> but we rounded it off to <b>10</b>.0.
[理解]此时可匹配项有：2~3个数字组成的字符串(<b>惰性匹配</b>)。
[注意]此时匹配内容为："99"与"97"与"10"
</pre>
<pre>
"[0-9]{2,}" =>The number was 9.<b>9997</b> but we rounded it off to <b>10</b>.0.
[理解]此时可匹配项有：至少2个数字组成的字符串。
</pre>
<pre>
"[0-9]{3}" =>The number was 9.<b>999</b>7 but we rounded it off to 10.0.
[理解]此时可匹配项有：3个数字组成的字符串。
</pre>
### 2.4 特征标群
#### 2.4.1 捕获特征群`(...)`
1. 捕获特征群是一组写在`()`中的子模式，使用后会**将匹配的结果分成若干个部分**。
<pre>
"(at\s.){2,}" =>The f<b>at cat sat o</b>n the mat.
[理解]此时可匹配项有：("at"+空格+任意字符)至少出现2次。
[捕获]第一部分："at cat s"，第二部分："at o"
</pre>
<pre>
"(at\s.){2,}?" =>The f<b>at cat s</b>at on the mat.
[理解]此时可匹配项有：("at"+空格+任意字符)至少出现2次(<b>惰性匹配</b>)。
[捕获]第一部分："at c"，第二部分："at s"
</pre>
#### 2.4.2 非捕获特征群`(?:...)`
1. 捕获特征，但**不将匹配的结果分成若干个部分**。
<pre>
"(?:at\s.){2,}?" =>The f<b>at cat s</b>at on the mat.
[理解]此时可匹配项有：("at"+空格+任意字符)至少出现2次(<b>惰性匹配</b>)。
[捕获]只有一个部分，即整体
</pre>
### 2.5 或运算符`|`
1. 或运算符`|`表示**或运算**，可以与`()`连用
<pre>
"(a|t)\s." =>The fa<b>t c</b>a<b>t s</b>a<b>t o</b>n the mat.
[理解]此时可匹配项有："a"+空格+任意单字符，或"t"+空格+任意单字符。
[等价]此时等价于"[at]\s."
[注意]此时匹配内容为："t c"与"t s"与"t o"
</pre>
<pre>
"(a|t).o|[^a-z]he" =><b>The</b> fat cat sa<b>t o</b>n the mat.
[理解]此时可匹配项有："a"+任意单字符+"o"，或"t"+任意单字符+"o"，或非小写字母+"he"
[注意]此时匹配内容为："The"与"t o"
</pre>
### 2.6 转码特殊字符
1. 反斜线`\`在表达式中用于转码紧跟其后的字符。用于指定`{ } [ ] / \ + * . $ ^ | ?`这些特殊字符。如果想要匹配这些特殊字符则要在其前面加上反斜线`\`
<pre>
"\s.*\." =>The<b> fat cat sat on the mat.</b>
[理解]此时可匹配项有：空格+任意长字符+"."
[注意]此时匹配内容为：" fat cat sat on the mat."
</pre>
### 2.7 锚点
### 2.7.1 开头指定`^`
1. `^`用来检查匹配的字符串是否在所匹配字符串的**开头**
2. `^`写在表达式的**最前面**
<pre>
"^." =><b>T</b>he fat cat sat on the mat.
[理解]此时可匹配项有：开头第一个字符
</pre>
### 2.7.2 结尾指定`$`
1. `$`用来检查匹配的字符串是否在所匹配字符串的**结尾**
2. `$`写在表达式的**最后面**
<pre>
"at\.$" =>The fat. cat. sat. on the m<b>at.</b>
[理解]此时可匹配项有：结尾的"at."
</pre>
## 3. 简写字符集
|简写|描述|
|:----:|:----:|
|`.`|除换行符外的所有字符|
|`\w`|匹配所有字母数字，等同于 `[a-zA-Z0-9_]`|
|`\W`|匹配所有非字母数字，即符号，等同于： `[^\w]`|
|`\d`|匹配数字： `[0-9]`|
|`\D`|匹配非数字： `[^\d]`|
|`\s`|匹配所有空格字符，等同于： `[\t\n\f\r\p{Z}]`|
|`\S`|匹配所有非空格字符： `[^\s]`|
|`\f`|匹配一个换页符|
|`\n`|匹配一个换行符|
|`\r`|匹配一个回车符|
|`\t`|匹配一个制表符|
|`\v`|匹配一个垂直制表符|
|`\p`|匹配 CR/LF（等同于 `\r\n`），用来匹配 DOS 行终止符|

## 4. 零宽度断言
1. 先行断言和后发断言都属于非捕获。
### 4.1 正先行断言`?=...`
1. 正先行断言表示第一部分表达式**之后必须**跟着`?=...`定义的表达式
2. 返回结果只包含满足**匹配条件的第一部分表达式**
<pre>
"(T|t)he(?=\sfat)" =><b>The</b> fat cat sat on the mat.
[理解]此时可匹配项有：后面是" fat"的"The"或"the"
</pre>
### 4.2 负先行断言`?!...`
1. 正先行断言表示第一部分表达式**之后必须不**跟着`?=...`定义的表达式
2. 返回结果只包含满足**匹配条件的第一部分表达式**
<pre>
"(T|t)he(?!\sfat)" =>The fat cat sat on <b>the</b> mat.
[理解]此时可匹配项有：后面不是" fat"的"The"或"the"
</pre>
### 4.3 正后发断言`?<=...`
1. 正先行断言表示第一部分表达式**之前必须**跟着`?=...`定义的表达式
2. 返回结果只包含满足**匹配条件的第一部分表达式**
<pre>
"(?<=fat\s)(.at)" =>The fat <b>cat</b> sat on the mat.
[理解]此时可匹配项有：前面是"fat "的(任意单字符+"at")
</pre>
### 4.4 负后发断言`?<!...`
1. 正先行断言表示第一部分表达式**之前必须不**跟着`?=...`定义的表达式
2. 返回结果只包含满足**匹配条件的第一部分表达式**
<pre>
"(?&lt;!fat\s)(.at)" =>The <b>fat</b> cat <b>sat</b> on the <b>mat</b>.
[理解]此时可匹配项有：前面不是"fat "的(任意单字符+"at")
</pre>

## 5. 标志
1. 标志也叫模式修正符，因为它可以用来修改表达式的搜索结果
2. 标志可以叠加使用
### 5.1 忽略大小写`i`
1. 标志`i`用于忽略大小写
<pre>
"/the/g" =>The fat cat sat on <b>the</b> mat.
[理解]此时可匹配项有：the
</pre>
<pre>
"/the/gi" =><b>The</b> fat cat sat on <b>the</b> mat.
[理解]此时可匹配项有：所有小写后为the的字符串
</pre>
### 5.2 全局搜索`g`
1. 标志`g`用于执行一个全局搜索(不仅仅返回第一个匹配的，而是返回全部)
<pre>
"/the/i" =><b>The</b> fat cat sat on the mat.
[理解]此时可匹配项有：第一个小写后为the的字符串
</pre>
<pre>
"/the/gi" =><b>The</b> fat cat sat on <b>the</b> mat.
[理解]此时可匹配项有：所有小写后为the的字符串
</pre>
### 5.3 多行修饰符`m`
1. 标志`m`用于执行一个多行匹配(比如，结合开头与结尾符号，可以检测每行开头结尾的匹配结果)
<pre>
"/.at[.]?$/g" => The
                 fat cat
                 sat on
                 the <b>mat.</b>
[理解]此时可匹配项有：单行结尾的任意单字符+("at."或"at")
</pre>
<pre>
"/.at[.]?$/gm" =>The
                 fat <b>cat</b>
                 sat on
                 the <b>mat.</b>
[理解]此时可匹配项有：多行结尾的任意单字符+("at."或"at")
[注意]多行结尾都没有空格符号
</pre>
## 6. 贪婪匹配与惰性匹配
1. 贪婪匹配：在整个正则表达式匹配成功的前提下，**尽可能多**的匹配
2. 惰性匹配：在整个正则表达式匹配成功的前提下，**尽可能少**的匹配
3. 正则表达式默认采用贪婪匹配模式，在该模式下意味着会匹配尽可能长的子串。我们可以使用`?`将贪婪匹配模式转化为惰性匹配模式。
<pre>
"a.*t\s" => The f<b>at cat sat </b>on the mat.
[理解]此时可匹配项有："a"+任意长字符串+"t"+空格符号
[注意]此时匹配内容为："at cat sat "
</pre>
<pre>
"a.*?t\s" => The f<b>at </b>cat sat on the mat.
[理解]此时可匹配项有："a"+任意长字符串+"t"+空格符号(<b>惰性匹配</b>)
[注意]此时匹配内容为："at "
</pre>